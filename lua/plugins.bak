return {

  ------------------------------------------------------------------------
  -- ðŸ§± CORE PLUGINS (foundation)
  ------------------------------------------------------------------------
  {
    "mason-org/mason.nvim",
    opts = {}, -- as per README (calls require("mason").setup())
  },

  {
    "neovim/nvim-lspconfig",
  },

  {
    "mason-org/mason-lspconfig.nvim",
    opts = {
      ensure_installed = { "lua_ls" },
    },
    dependencies = { "mason-org/mason.nvim", "neovim/nvim-lspconfig" },
  },

  ------------------------------------------------------------------------
  -- ðŸŒ³ TREESITTER (syntax & highlighting)
  ------------------------------------------------------------------------
  {
    "nvim-treesitter/nvim-treesitter",
    branch = "master",
    lazy = false,
    build = ":TSUpdate",
    opts = {
      ensure_installed = {
        "lua",
        "vim",
        "html",
        "bash",
        "css",
        "vimdoc",
        "query",
        "markdown",
        "markdown_inline",
        "bash",
        "javascript",
        "json",
      },
      auto_install = true,
      highlight = { enable = true, additional_vim_regex_highlighting = false },
    },
    config = function(_, opts)
      require("nvim-treesitter.configs").setup(opts)
    end,
  },

  ------------------------------------------------------------------------
  -- ðŸ§¹ LINTERS & FORMATTERS (via none-ls + Mason) -- 
  ------------------------------------------------------------------------
  {
    "nvimtools/none-ls.nvim",
    event = { "BufReadPre", "BufNewFile" },
    dependencies = {
      "mason-org/mason.nvim",
      "nvim-lua/plenary.nvim",
      "jay-babu/mason-null-ls.nvim",
    },
    config = function()
      local null_ls = require("null-ls")
      null_ls.setup({
        sources = {
          null_ls.builtins.formatting.stylua,
          null_ls.builtins.formatting.prettierd,
        },
      })

      require("mason-null-ls").setup({
        ensure_installed = { "stylua", "prettierd" },
        automatic_installation = true,
      })
    end,
  },

  ------------------------------------------------------------------------
  -- ðŸª² DEBUGGING (DAP + Mason)
  ------------------------------------------------------------------------
  {
    "jay-babu/mason-nvim-dap.nvim",
    dependencies = {
      "mason-org/mason.nvim",
      "mfussenegger/nvim-dap",
    },
    opts = {
      ensure_installed = { "js-debug-adapter" },
      automatic_installation = true,
    },
  },

  ------------------------------------------------------------------------
  -- CODE COMPLETION
  ------------------------------------------------------------------------

  {
  "saghen/blink.cmp",
  version = "*",
  dependencies = {
    "rafamadriz/friendly-snippets",
    "L3MON4D3/LuaSnip",
  },
  event = "InsertEnter",
  opts = {
    keymap = {
      preset = "default",
      -- Explicitly confirm selection with Enter
      ["<CR>"] = { "accept", "fallback" },
      ["<Tab>"] = { "select_next", "fallback" },
      ["<S-Tab>"] = { "select_prev", "fallback" },
    },
    appearance = { use_nvim_cmp_as_default = true },
    completion = {
      menu = { border = "rounded" },
      documentation = { auto_show = true },
    },
    signature = { enabled = true },
    snippets = { preset = "luasnip" },
    sources = {
      default = { "lsp", "path", "snippets", "buffer" },
    },
  },
  config = function(_, opts)
    require("blink.cmp").setup(opts)
  end,
},

  ------------------------------------------------------------------------
  -- SNACKS (picker,explorer,notifications)
  ------------------------------------------------------------------------

  {
  "folke/snacks.nvim",
  version = "*",
  lazy = false,
  priority = 1000,
  opts = {
    defaults = { enabled = true }, -- âœ… must be a table, not a boolean
    explorer = { enabled = true    },
     picker = {
      enabled = true,
      sources = {
        explorer = {
          layout = {
            auto_hide = {"input"},
            preset = "sidebar",
            layout = { position = "right", width = 35 }, -- <-- note the double `layout`
          },
        },
      },
    },
    notifier = { enabled = true },
    indent = { enabled = true },
    statuscolumn = { enabled = true },
    words = { enabled = true },
    lsp = { enabled = true },
    rename = { enabled = true },
    quickfix = { enabled = true },
    terminal = { enabled = true },
    scratch = { enabled = true },
    scroll = { enabled = true },
    scope = { enabled = true },
  },
  config = function(_, opts)
    local snacks = require("snacks")
    snacks.setup(opts)

    -- Keymaps (explicit)
    vim.keymap.set("n", "<leader><space>", function()
      snacks.picker.files()
    end, { desc = "Find Files" })

    vim.keymap.set("n", "<leader>e", function()
      snacks.explorer()
    end, { desc = "Toggle Explorer" })
  end,
},


  ------------------------------------------------------------------------
  -- ðŸ’¡ OPTIONAL QUALITY-OF-LIFE UTILITIES
  ------------------------------------------------------------------------
  {
    "tpope/vim-sleuth", -- auto-detect tabstop/shiftwidth
  },

  --- WHICH KEY
  {
  "folke/which-key.nvim",
  event = "VeryLazy",
  opts = {},
  config = function(_, opts)
    local wk = require("which-key")
    wk.setup(opts)
    wk.add({
      { "<leader>f", group = "Find" },
      { "<leader>e", group = "Explorer" },
      { "<leader>l", group = "LSP" },
      { "<leader>d", group = "Debug" },
      { "<leader>g", group = "Git" },
    })
  end,
},

}
